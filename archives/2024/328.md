---
title: 批量图片旋转脚本
number: '#328'
link: 'https://github.com/toFrankie/blog/issues/328'
created_at: '2024-02-07 15:33:51'
updated_at: '2024-02-07 15:34:25'
labels:
  - '2024'
  - Linux
  - 代码片段
---
```shell
#!/bin/bash

# 获取脚本或可执行文件的路径
script_path="$(dirname "$(readlink -f "$0")")"

# 检查 convert 工具是否已安装
if ! command -v convert &>/dev/null; then
  echo "Error: 'convert' command not found. Please install ImageMagick."
  exit 1
fi

# 设置源目录和输出目录
source_dir="$script_path/source"
output_dir="$script_path/output"

# 清空输出目录
if [ -d "$output_dir" ]; then
  rm -rf "$output_dir"
fi

# 创建输出目录，如果不存在
mkdir -p "$output_dir"

# 遍历源目录中的图像文件
for file in "$source_dir"/*; do
  # if [ -e "$file" ]; then
  # 提取文件名和扩展名
  file_name=$(basename "$file")
  base_name="${file_name%.*}"
  extension="${file_name##*.}"

  if [ -f "$file" ] && [ -n "$extension" ] && { [ "$extension" = "png" ] || [ "$extension" = "jpg" ] || [ "$extension" = "jpeg" ] || [ "$extension" = "gif" ]; }; then

    # 使用 convert 工具旋转图像并导出到输出目录
    convert "$file" -rotate 90 "$output_dir/$file_name"

    echo "已处理文件: $file_name"
  fi
done

echo "处理完成！"
```

未完待续...
