---
title: Proxy 与 Reflect
number: '#334'
link: 'https://github.com/toFrankie/blog/issues/334'
created_at: '2024-04-05 19:07:10'
updated_at: '2024-04-06 01:35:06'
labels:
  - 前端
  - JS/ES
  - '2024'
---
## 元编程

元编程（meta-programming）一般分为两类，一是在编译时生成代码，二是在运行时修改代码行为。

> Just like metadata is data about data, metaprogramming is writing programs that manipulate programs. It's a common perception that metaprograms are the programs that generate other programs. But the paradigm is even broader. All of the programs designed to read, analyze, transform, or modify themselves are examples of metaprogramming. [Metaprogramming in Python](https://developer.ibm.com/tutorials/ba-metaprogramming-python/)

> [怎么理解元编程？](https://www.zhihu.com/question/23856985)

## Proxy

### 简介

如果你问我多大，通过 `person.age` 访问得到 `20`。

```js
const person = {
 name: 'Frankie',
 age: 20,
}
```



但这届年轻人，总是说「别问，问就是 18」，那么我会创建一个替身：

```js
const substitute = new Proxy(person, {
  get(target, prop) {
    if (prop === 'age') {
      return 18
    }
    return target[prop]
  },
})
```

这样，再问我年龄时，你问的其实是 `substitute`，此时 `substitute.age` 是 18。尽管我真实年龄 `person.age` 是 20。

在 JavaScript 中，Proxy 通常用于修改某些操作的默认行为。比如，别人访问我的年龄，讲道理应该返回真实年龄（默认行为），但由于某些原因（心情不爽），就告诉你我 18。

**Proxy 对象用于创建一个对象的代理，从而实现基本操作的拦截和自定义（如属性查找、赋值、枚举、函数调用等）。**

## 语法

```js
const proxy = new Proxy(target, handler)
```

- `target` - 被代理的对象。可以是任意类型的对象，比如数组、函数、另一个代理对象等。
- `handler` - 一个含有特定属性的对象，其属性值为函数。


未完待续...
