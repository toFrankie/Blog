---
title: iCloud 云盘同步卡住的解决方法
number: '#345'
link: 'https://github.com/toFrankie/blog/issues/345'
created_at: '2024-08-03 16:56:44'
updated_at: '2024-08-03 16:57:07'
labels:
  - '2024'
  - Mac
---
在一定程度上来说，Apple 生态确实做得很不错。

但是 iCloud Drive 就是一坨屎，经常性同步卡死...

比如这样，它可以卡到天荒地老... :anger:

![](https://cdn.jsdelivr.net/gh/toFrankie/blog@main/images/2024/8/1722672907055.png)

一搜，全是这类问题：

- [iCloud Drive is stuck uploading items and no longer syncs](https://apple.stackexchange.com/questions/264915/icloud-drive-is-stuck-uploading-items-and-no-longer-syncs)
- [iCloud stuck on "uploading X items (Y of Y)" - Monterey 12.1](https://apple.stackexchange.com/questions/434190/icloud-stuck-on-uploading-x-items-y-of-y-monterey-12-1)
- [iCloud Drive Won't Sync on Mac](https://apple.stackexchange.com/questions/313716/icloud-drive-wont-sync-on-mac)
- [iCloud for Mac is stuck on "waiting to upload"](https://developer.apple.com/forums/thread/651829)
- ...

他们可能会叫你关闭 iCloud 云盘同步，再重新打开，接着重启设备，但然并卵。

一些「**可能**」有效的方法。

## 杀掉进程

终端下先后执行以下命令，然后重新打开 Finder。

```shell
$ killall bird
$ killall cloudd
```

`bird` 是什么？

```shell
$ man bird
BIRD(8)                                       System Manager's Manual                                       BIRD(8)

NAME
     bird – Documents in the Cloud

SYNOPSIS
     bird

DESCRIPTION
     bird is one of the system daemons backing the Documents in the Cloud feature.

     There are no configuration options to bird, and users should not run bird manually.

SEE ALSO
     brctl(1)

Mac OS X                                              22/04/14
```

## 调整进程优先级


1. 执行 `ps aux | grep bird`，你会看到类似的输出，其中 `4137` 为进程 ID（PID）。

```shell
$ ps aux | grep bird
frankie           4137   0.0  0.1 33705140  10160   ??  S     4:01下午   0:06.68 /System/Library/PrivateFrameworks/CloudDocsDaemon.framework/Versions/A/Support/bird
```

2. 执行 `ps -fl -C <PID>` 查看某进程优先级。

```shell
$ ps -fl -C 4137
  UID   PID  PPID   C STIME   TTY           TIME CMD                     F PRI NI       SZ    RSS WCHAN     S             ADDR
  501  4137     1   0  4:01下午 ??         0:06.68 /System/Library/  1004004  31  0 33704616  10244 -      S                   0
```

3. 执行 `sudo renice -n -10 -p <PID>` 调整某个进程优先级。

```shell
$ sudo renice -n -10 -p 4137
```

> 负数优先级更高，据说 `-20` 最高，但不建议，这里使用 `-10`（参考[这里](https://stackoverflow.com/a/72534456/14569218)）。
